{% from "atoms/a.njk" import a %}
{% from "atoms/headings.njk" import h2 %}
{% from 'atoms/icons.njk' import iconImage %}
{% from 'organisms/global-image.njk' import global_image %}
{# 
    #   @desc   footer element
    #   @param  footer       object (footer data from data.json)
    #   @author Nazmul Alam
 #}
{% macro footer(footer, pageUrl, header = false) %}
    <footer class="{{ 'top-menu' if header == true else 'footer' }}">
        <!--
        Please note: do not remove this .video-block element
        It is used to load the video feed
         -->
        {% if pageUrl !== '/build/mountain-report/' %} 
        <div style="display:block; position:relative;" class="video-block video">
            <div class="video-container" id="violet-1546311408" pages></div>
        </div>
        {% endif %}
        <article class="footer__container">
            {% for sec in footer.sections %}
                <section class="footer__col font-calibre" 
                {% if header == true %}
                style="margin-bottom: 1.5rem;"
                {% endif %}
                >
                    {{ h2( classes=['heading', 'font-ivar', 'heading__foooter--2'], copy=sec.title ) }}
                    {% for actionLink in sec.links %}
                        {% set link = actionLink.action %}
                        {% set trg = '_blank' if not link.internal else 
                            '_self' %}
                        {% if not link.icon %}
                            <nav>{{ a( id=link.copy, copy=link.copy, href=link.url, classes=['footer__link'], target=trg) }}</nav>
                        {% else %}
                            {{ a( id=link.label, copy=(link.icon | safe), href=link.url, classes=['footer__link'], target=trg) }}
                        {% endif %}
                    {% endfor %}
                </section>
            {% endfor %}
        </article>
        {% if header == true %}
            <div class="grid footer-search">
                <div class="menu__input--container cursor-pointer">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.837 19.0453C19.9414 19.1501 20 19.2924 20 19.4407C20 19.5891 19.9414 19.7313 19.837 19.8362C19.7326 19.9411 19.5911 20 19.4435 20C19.2959 20 19.1543 19.9411 19.0499 19.8362L13.0805 13.8373C13.0239 13.7872 12.951 13.7595 12.8755 13.7595C12.8 13.7595 12.7271 13.7872 12.6704 13.8373C12.6704 13.8373 12.5817 13.9153 12.421 14.0323C10.8584 15.2122 8.91024 15.756 6.96594 15.5551C5.02164 15.3542 3.22441 14.4233 1.93345 12.9485C0.642483 11.4737 -0.0471076 9.56366 0.00250234 7.60008C0.0521123 5.63651 0.837268 3.76407 2.20104 2.35701C3.56481 0.949955 5.40674 0.111929 7.35868 0.0104268C9.31062 -0.091075 11.2288 0.551425 12.7298 1.80951C14.2308 3.0676 15.2041 4.8486 15.4551 6.79654C15.7061 8.74448 15.2164 10.7159 14.0838 12.3167C13.9452 12.5061 13.8233 12.6565 13.8233 12.6565C13.7722 12.7129 13.744 12.7863 13.744 12.8626C13.744 12.9388 13.7722 13.0122 13.8233 13.0686L19.837 19.0453ZM7.80397 14.4277C9.11945 14.4277 10.4054 14.0357 11.4992 13.3013C12.5929 12.5668 13.4454 11.5229 13.9488 10.3016C14.4522 9.08024 14.584 7.73631 14.3273 6.43974C14.0707 5.14317 13.4372 3.95219 12.507 3.01742C11.5769 2.08265 10.3917 1.44606 9.10155 1.18815C7.81135 0.93025 6.47403 1.06262 5.25869 1.56851C4.04336 2.07441 3.00459 2.93111 2.27375 4.03029C1.54292 5.12947 1.15283 6.42175 1.15283 7.74372C1.15283 9.51643 1.85358 11.2165 3.10091 12.47C4.34824 13.7235 6.03998 14.4277 7.80397 14.4277Z" fill="#231F20"></path>
                    </svg>
                    <label class="menu__input w-full">
                        <input type="email" placeholder="I'm searching for" class="form-input border-0 w-full p-2" aria-required="true" aria-label="true" aria-invalid="false">
                    </label>
                </div>
                <div></div>
            </div>
        {% endif %}
        {% if not header == true %}
            <article class="footer__copy font-calibre">
                <section class="footer__copy__image">
                    {% for imgLink in footer.bottom.image_link %}
                        <a href="{{imgLink.url}}" target="_blank">
                            {{ global_image(imgLink.image.global_image, classes="footer_image", imgClass='footer_image') }}
                        </a>
                        {# {{ imgLink | json }} #}
                        {# {{ iconImage( src=footer.bottom.image, alt='Hotels icon' ) }} #}
                    {% endfor %}
                </section>
                <section>{{footer.bottom.label | safe}}</section>
                
            </article>
            <img class="footer__s_dot" src={{footer.bottom.static_image | theImgSrc}} alt="S dot logo">
        {% endif %}
    </footer>

{% endmacro %}