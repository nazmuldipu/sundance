{% macro cardcard(header, eyebrow, description, image, alt, link)%}
  <div class="container px-12 mx-auto grid grid-cols-3 gap-2 place-items-auto">
    <img class="rounded" src="{{ image }}" alt="{{ alt }}">
    <div class="mt-2">
      <div>
        <div class="text-xs text-green-300 uppercase font-bold">{{ eyebrow }}</div>
        <div class="font-bold text-green-400 leading-snug">
          <a href="{{ link }}" class="hover:underline">{{ header }}</a>
        </div>
        <div class="mt-2 text-sm text-green-300">{{ description }}</div>
      </div>
    </div>
  </div>
{% endmacro %}

{% macro tester(foo, bar) %}
  <h1 class="text-purple-700 font-bold uppercase">{{ foo }}
    {{ bar }}</h1>
{% endmacro %}

{% macro section_maker(section) %}
  <div class="container mx-auto bg-{{ section.backgroundColor }}">
    <div class="grid place-content-stretch {{ section.grid.backgroundColor }} {{ section.grid.cols | join(' ')}} {{ section.grid.gaps | join(' ') }}">
      {% for component in section.components %}
        <div class="{{ component.classes | join(' ') }}">
          {% include component.path %}
        </div>
      {% endfor %}
    </div>
  </div>
{% endmacro %}

{% macro scaled_image(imgObj = {}, lazy = true, aspectRatios = []) %}
  {# for each breakpoint #}
  <picture class=" 
    {% if aspectRatios | length > 0 %}
        frame {% for aspectRatio in aspectRatios %} {{ aspectRatio }} {% endfor %}
    {% elif imgObj.aspectRatios %}
        frame {{ imgObj.aspectRatios }}
    {% endif %}

    {% if imgObj.pictureClasses %}
        {{imgObj.pictureClasses}}
    {% else %}
        w-full
    {% endif %}
    ">
    {% for direction in imgObj.artDirection %}
      <source 
          srcset="{{ direction | imgObjSrcSet('webp') }}"
          {% if direction.intrinsicwidth %}
            width="{{ direction.intrinsicwidth }}"
          {% endif %}
          {% if direction.intrinsicheight %}
              height="{{ direction.intrinsicheight }}"
          {% endif %}
          media="{{ direction.media }}" 
          sizes="{{ direction.sizes if direction.sizes else '75vw' }}"
          type="image/webp">
      <source 
          srcset="{{ direction | imgObjSrcSet(direction.type) }}"
          {% if direction.intrinsicwidth %}
            width="{{ direction.intrinsicwidth }}"
          {% endif %}
          {% if direction.intrinsicheight %}
              height="{{ direction.intrinsicheight }}"
          {% endif %}
          media="{{ direction.media }}" 
          sizes="{{ direction.sizes if direction.sizes else '75vw' }}"
          type="image/{{ direction.type | getImgSourceType }}">
    {% endfor %}
    {# we assume the first direction is the default to use #}
    {% set default = imgObj.artDirection | first %}
    <img 
      srcset="{{ default | imgObjSrcSet(default.type) }}"
      src="{{ default.src }}.{{ default.type if default.type else 'jpg' }}" 
      class="{{ imgObj.classes if imgObj.classes else 'w-full' }}"
      sizes="{{ default.sizes if default.sizes else '75vw' }}" 
      loading="lazy"
      alt="{{ default.alt }}">
  </picture>
{% endmacro %}